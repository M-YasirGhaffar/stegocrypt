<!-- core/templates/core/decrypt_upload.html -->
{% extends "base.html" %}
{% block title %}Upload & Decrypt{% endblock title %}

{% block nav_links %}
  {% if user.is_authenticated %}
    <a href="{% url 'index' %}" class="text-blue-600 hover:underline">Dashboard</a>
    <a href="{% url 'decrypt-upload' %}" class="text-blue-600 hover:underline">Upload & Decrypt</a>
    <a href="{% url 'logout' %}" class="text-blue-600 hover:underline">Logout</a>
  {% else %}
    <a href="{% url 'index' %}" class="text-blue-600 hover:underline">Home</a>
    <a href="{% url 'login' %}" class="text-blue-600 hover:underline">Login</a>
    <a href="{% url 'register' %}" class="text-blue-600 hover:underline">Register</a>
  {% endif %}
{% endblock nav_links %}

{% block content %}
<div class="max-w-md mx-auto bg-white rounded shadow p-6 my-4">
  <h3 class="text-xl font-semibold mb-4">Decrypt External Image</h3>
  <p class="text-sm text-gray-600 mb-2">
    Provide the pass-key for externally uploaded images. 
    Account password won't help for external images not in the DB.
  </p>
  <form method="POST" enctype="multipart/form-data" class="space-y-4">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" class="w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
      Decrypt
    </button>
  </form>
</div>
{% endblock %}
